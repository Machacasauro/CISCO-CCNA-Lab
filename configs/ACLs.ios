# Barcelona
interface vlan 10
 ip access-group NET-INTERNET-SOME-IN in
 ip access-list extended NET-INTERNET-SOME-IN

remark  --- PERMIT MULTICAST ---
 permit ip 192.168.17.0 0.0.0.255 224.0.0.0 0.0.0.255
remark --- PERMIT DHCP ---
 permit udp 192.168.17.0 0.0.0.255 any eq 67
 permit udp any eq 68 192.168.17.0 0.0.0.255 eq 67
 
remark --- PERMIT DNS TO INTERNAL SERVER ---
 permit udp 192.168.17.0 0.0.0.255 host 192.168.2.100 eq 53
 permit tcp 192.168.17.0 0.0.0.255 host 192.168.2.100 eq 53

remark --- PERMIT INTER-VLAN 10 ---
 permit ip 192.168.17.0 0.0.0.255 192.168.17.0 0.0.0.255

remark --- DENY ACCESS TO INTERNAL RFC1918 ---
 deny ip 192.168.17.0 0.0.0.255 192.168.2.0 0.0.0.255
 deny ip 192.168.17.0 0.0.0.255 192.168.3.0 0.0.0.255
 deny ip 192.168.17.0 0.0.0.255 192.168.4.0 0.0.0.255
 deny ip 192.168.17.0 0.0.0.255 192.168.99.0 0.0.0.255
 deny ip 192.168.17.0 0.0.0.255 192.168.16.0 0.0.7.255
remark --- PERMIT ANY ---
 permit ip any any







interface vlan 20
 ip access-group SEVERS-INTERNET-SOME-IN in
 ip access-list extended SERVERS-INTERNET-SOME-IN

remark  --- PERMIT MULTICAST ---
 permit ip 192.168.2.0 0.0.0.255 224.0.0.0 0.0.0.255
remark --- DENY DHCP ---
 deny udp 192.168.2.0 0.0.0.255 any eq 67
 deny udp any eq 68 192.168.2.0 0.0.0.255 eq 67
 
remark --- PERMIT INTER-VLAN 10/20 ---
 permit ip 192.168.2.0 0.0.0.255 192.168.17.0 0.0.0.255
 permit ip 192.168.2.0 0.0.0.255 192.168.18.0 0.0.0.255

remark --- DENY ACCESS TO INTERNAL RFC1918 ---
 deny ip 192.168.2.0 0.0.0.255 192.168.3.0 0.0.0.255
 deny ip 192.168.2.0 0.0.0.255 192.168.4.0 0.0.0.255
 deny ip 192.168.2.0 0.0.0.255 192.168.99.0 0.0.0.255
 deny ip 192.168.2.0 0.0.0.255 192.168.16.0 0.0.7.255
remark --- PERMIT ANY ---
 permit ip any any





interface vlan 30
 ip access-group GUEST-INTERNET-ONLY-IN in
ip access-list extended GUEST-INTERNET-ONLY-IN

remark  --- PERMIT MULTICAST ---
 permit ip 192.168.3.0 0.0.0.255 224.0.0.0 0.0.0.255
remark --- PERMIT DHCP ---
 permit udp 192.168.3.0 0.0.0.255 any eq 67
 permit udp any eq 68 192.168.3.0 0.0.0.255 eq 67
 
remark --- PERMIT DNS TO INTERNAL SERVER ---
 permit udp 192.168.3.0 0.0.0.255 host 192.168.2.100 eq 53
 permit tcp 192.168.3.0 0.0.0.255 host 192.168.2.100 eq 53

remark --- DENY ACCESS TO INTERNAL RFC1918 ---
 deny ip 192.168.3.0 0.0.0.255 192.168.17.0 0.0.0.255
 deny ip 192.168.3.0 0.0.0.255 192.168.2.0 0.0.0.255
 deny ip 192.168.3.0 0.0.0.255 192.168.4.0 0.0.0.255
 deny ip 192.168.3.0 0.0.0.255 192.168.99.0 0.0.0.255
 deny ip 192.168.3.0 0.0.0.255 192.168.16.0 0.0.7.255
remark --- PERMIT ANY ---
 permit ip any any



interface vlan 40
ip access-group VOICE-ONLY-IN in
ip access-list extended VOICE-ONLY-IN

remark  --- PERMIT MULTICAST ---
 permit ip 192.168.4.0 0.0.0.255 224.0.0.0 0.0.0.255
remark --- PERMIT DHCP ---
 permit udp 192.168.4.0 0.0.0.255 any eq 67
 permit udp any eq 67 192.168.4.0 0.0.0.255 eq 68
 
remark --- PERMIT DNS TO INTERNAL SERVER ---
 permit udp 192.168.4.0 0.0.0.255 host 192.168.2.100 eq 53
 permit tcp 192.168.4.0 0.0.0.255 host 192.168.2.100 eq 53

  remark --- TFTP (Phone config)
 permit udp 192.168.4.0 0.0.0.255 host 192.168.2.100 eq 69

remark --- PERMIT SIP/SCCP ---
 permit udp 192.168.4.0 0.0.0.255 host 192.168.2.100 range 5060 5061
 permit tcp 192.168.4.0 0.0.0.255 host 192.168.2.100 range 5060 5061
permit tcp 192.168.4.0 0.0.0.255 host 192.168.2.100 eq 2000

 remark --- RTP/RTCP voice media ---
 permit udp 192.168.4.0 0.0.0.255 host 192.168.2.100 range 16384 32767
 permit udp host 192.168.2.100 192.168.4.0 0.0.0.255 range 16384 32767
 
remark --- DENY ACCESS TO INTERNAL RFC1918 ---
 deny ip 192.168.4.0 0.0.0.255 192.168.17.0 0.0.0.255
 deny ip 192.168.4.0 0.0.0.255 192.168.2.0 0.0.0.255
 deny ip 192.168.4.0 0.0.0.255 192.168.3.0 0.0.0.255
 deny ip 192.168.4.0 0.0.0.255 192.168.99.0 0.0.7.255
 deny ip 192.168.4.0 0.0.0.255 192.168.16.0 0.0.7.255
remark --- PERMIT ANY ---
 permit ip any any



interface vlan 99
ip access-group MGMT-ONLY-IN in
ip access-list extended MGMT-ONLY-IN

remark  --- PERMIT MULTICAST ---
 permit ip 192.168.99.0 0.0.0.255 224.0.0.0 0.0.0.255
remark --- PERMIT DHCP ---
 permit udp 192.168.99.0 0.0.7.255 any eq 67
 permit udp any eq 68 192.168.99.0 0.0.7.255 eq 67
 
remark --- PERMIT DNS TO INTERNAL SERVER ---
 permit udp 192.168.4.0 0.0.0.255 host 192.168.2.100 eq 53
 permit tcp 192.168.4.0 0.0.0.255 host 192.168.2.100 eq 53

remark --- PERMIT INTER-VLAN ICMP 10/20/30/40 ALL ---
 permit icmp 192.168.99.0 0.0.0.255 192.168.1.0 0.0.7.255
 permit icmp 192.168.99.0 0.0.0.255 192.168.16.0 0.0.7.255
 permit icmp 192.168.99.16 0.0.0.15 192.168.99.0 0.0.0.255
 
remark --- DENY ACCESS TO INTERNAL RFC1918 ---
 deny ip 192.168.99.0 0.0.0.15 192.168.1.0 0.0.0.255
 deny ip 192.168.99.0 0.0.0.15 192.168.2.0 0.0.0.255
 deny ip 192.168.99.0 0.0.0.15 192.168.3.0 0.0.0.255
 deny ip 192.168.99.0 0.0.0.15 192.168.4.0 0.0.0.255
 deny ip 192.168.99.0 0.0.0.15 192.168.99.0 0.0.0.255
remark --- PERMIT ANY ---
 permit ip any any


# Madrid

interface GigabitEthernet0/0.10
 ip access-group NET-INTERNET-SOME-IN in
 ip access-list extended NET-INTERNET-SOME-IN

remark  --- PERMIT MULTICAST ---
 permit ip 192.168.17.0 0.0.0.255 224.0.0.0 0.0.0.255
remark --- PERMIT DHCP ---
 permit udp 192.168.17.0 0.0.0.255 any eq 67
 permit udp any eq 68 192.168.17.0 0.0.0.255 eq 67
 
remark --- PERMIT DNS TO INTERNAL SERVER ---
 permit udp 192.168.17.0 0.0.0.255 host 192.168.18.100 eq 53
 permit tcp 192.168.17.0 0.0.0.255 host 192.168.18.100 eq 53

remark --- PERMIT INTER-VLAN 10 ---
 permit ip 192.168.17.0 0.0.0.255 192.168.1.0 0.0.0.255

remark --- DENY ACCESS TO INTERNAL RFC1918 ---
 deny ip 192.168.17.0 0.0.0.255 192.168.18.0 0.0.0.255
 deny ip 192.168.17.0 0.0.0.255 192.168.19.0 0.0.0.255
 deny ip 192.168.17.0 0.0.0.255 192.168.20.0 0.0.0.255
 deny ip 192.168.17.0 0.0.0.255 192.168.99.0 0.0.0.255
 deny ip 192.168.17.0 0.0.0.255 192.168.1.0 0.0.7.255
remark --- PERMIT ANY ---
 permit ip any any


interface GigabitEthernet0/0.20
 ip access-group SEVERS-INTERNET-SOME-IN in
 ip access-list extended SERVERS-INTERNET-SOME-IN

remark  --- PERMIT MULTICAST ---
 permit ip 192.168.18.0 0.0.0.255 224.0.0.0 0.0.0.255
remark --- DENY DHCP ---
 deny udp 192.168.18.0 0.0.0.255 any eq 67
 deny udp any eq 68 192.168.18.0 0.0.0.255 eq 67
 
remark --- PERMIT INTER-VLAN 10/20 ---
 permit ip 192.168.18.0 0.0.0.255 192.168.17.0 0.0.0.255
 permit ip 192.168.18.0 0.0.0.255 192.168.2.0 0.0.0.255

remark --- DENY ACCESS TO INTERNAL RFC1918 ---
 deny ip 192.168.18.0 0.0.0.255 192.168.19.0 0.0.0.255
 deny ip 192.168.18.0 0.0.0.255 192.168.20.0 0.0.0.255
 deny ip 192.168.18.0 0.0.0.255 192.168.99.0 0.0.0.255
 deny ip 192.168.18.0 0.0.0.255 192.168.1.0 0.0.7.255
remark --- PERMIT ANY ---
 permit ip any any


interface GigabitEthernet0/0.30
 ip access-group GUEST-INTERNET-ONLY-IN in
ip access-list extended GUEST-INTERNET-ONLY-IN

remark  --- PERMIT MULTICAST ---
 permit ip 192.168.19.0 0.0.0.255 224.0.0.0 0.0.0.255
remark --- PERMIT DHCP ---
 permit udp 192.168.19.0 0.0.0.255 any eq 67
 permit udp any eq 68 192.168.19.0 0.0.0.255 eq 67
 
remark --- PERMIT DNS TO INTERNAL SERVER ---
 permit udp 192.168.19.0 0.0.0.255 host 192.168.18.100 eq 53
 permit tcp 192.168.19.0 0.0.0.255 host 192.168.18.100 eq 53

remark --- DENY ACCESS TO INTERNAL RFC1918 ---
 deny ip 192.168.19.0 0.0.0.255 192.168.17.0 0.0.0.255
 deny ip 192.168.19.0 0.0.0.255 192.168.18.0 0.0.0.255
 deny ip 192.168.19.0 0.0.0.255 192.168.20.0 0.0.0.255
 deny ip 192.168.19.0 0.0.0.255 192.168.99.0 0.0.0.255
 deny ip 192.168.19.0 0.0.0.255 192.168.1.0 0.0.7.255
remark --- PERMIT ANY ---
 permit ip any any



interface GigabitEthernet0/0.40
ip access-group VOICE-ONLY-IN in
ip access-list extended VOICE-ONLY-IN

remark  --- PERMIT MULTICAST ---
 permit ip 192.168.20.0 0.0.0.255 224.0.0.0 0.0.0.255
remark --- PERMIT DHCP ---
 permit udp 192.168.20.0 0.0.0.255 any eq 67
 permit udp any eq 67 192.168.20.0 0.0.0.255 eq 68
 
remark --- PERMIT DNS TO INTERNAL SERVER ---
 permit udp 192.168.20.0 0.0.0.255 host 192.168.18.100 eq 53
 permit tcp 192.168.20.0 0.0.0.255 host 192.168.18.100 eq 53

  remark --- TFTP (Phone config)
 permit udp 192.168.20.0 0.0.0.255 host 192.168.18.100 eq 69

remark --- PERMIT SIP/SCCP ---
 permit udp 192.168.20.0 0.0.0.255 host 192.168.18.100 range 5060 5061
 permit tcp 192.168.20.0 0.0.0.255 host 192.168.18.100 range 5060 5061
permit tcp 192.168.20.0 0.0.0.255 host 192.168.18.100 eq 2000

 remark --- RTP/RTCP voice media ---
 permit udp 192.168.20.0 0.0.0.255 host 192.168.18.100 range 16384 32767
 permit udp host 192.168.18.100 192.168.20.0 0.0.0.255 range 16384 32767
 
remark --- DENY ACCESS TO INTERNAL RFC1918 ---
 deny ip 192.168.20.0 0.0.0.255 192.168.17.0 0.0.0.255
 deny ip 192.168.20.0 0.0.0.255 192.168.18.0 0.0.0.255
 deny ip 192.168.20.0 0.0.0.255 192.168.19.0 0.0.0.255
 deny ip 192.168.20.0 0.0.0.255 192.168.99.0 0.0.7.255
 deny ip 192.168.20.0 0.0.0.255 192.168.16.0 0.0.7.255
remark --- PERMIT ANY ---
 permit ip any any



interface GigabitEthernet0/0.99
ip access-group MGMT-ONLY-IN in
ip access-list extended MGMT-ONLY-IN

remark  --- PERMIT MULTICAST ---
 permit ip 192.168.99.0 0.0.0.255 224.0.0.0 0.0.0.255
remark --- PERMIT DHCP ---
 permit udp 192.168.99.16 0.0.0.15 any eq 67
 permit udp any eq 68 192.168.99.16 0.0.0.15 eq 67
 
remark --- PERMIT DNS TO INTERNAL SERVER ---
 permit udp 192.168.99.16 0.0.0.15 host 192.168.18.100 eq 53
 permit tcp 192.168.99.16 0.0.0.15 host 192.168.18.100 eq 53

remark --- PERMIT INTER-VLAN ICMP 10/20/30/40 ALL ---
 permit icmp 192.168.99.16 0.0.0.15 192.168.16.0 0.0.7.255
 permit icmp 192.168.99.16 0.0.0.15 192.168.1.0 0.0.7.255
 permit icmp 192.168.99.16 0.0.0.15 192.168.99.0 0.0.0.255
 
 
remark --- DENY ACCESS TO INTERNAL RFC1918 ---
 deny ip 192.168.99.16 0.0.0.15 192.168.17.0 0.0.0.255
 deny ip 192.168.99.16 0.0.0.15 192.168.18.0 0.0.0.255
 deny ip 192.168.99.16 0.0.0.15 192.168.19.0 0.0.0.255
 deny ip 192.168.99.16 0.0.0.15 192.168.20.0 0.0.0.255
 deny ip 192.168.99.16 0.0.0.15 192.168.99.0 0.0.0.255
remark --- PERMIT ANY ---
 permit ip any any
